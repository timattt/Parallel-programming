# Всякая всячина, полезная для работы на кластере

## Полезные ссылки

* Команда [**qsub**](http://cluster2.inm.ras.ru/info/torque/)
* Команда [**mpirun**](http://www.ccas.ru/mmes/educat/lab04k/01/mpirun.html)
* Функции для пересылки [**тут**](https://parallel.ru/vvv/mpi.html#:~:text=MPI%20%2D%20message%20passing%20interface%20%2D%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B0,%D1%8F%D0%B2%D0%BB%D1%8F%D1%8E%D1%89%D0%B5%D0%B5%D1%81%D1%8F%20%D1%83%D0%BD%D0%B8%D0%BA%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%BC%20%D0%B0%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D0%BE%D0%BC%20%D0%BA%D0%B0%D0%B6%D0%B4%D0%BE%D0%B3%D0%BE%20%D0%BF%D1%80%D0%BE%D1%86%D0%B5%D1%81%D1%81%D0%B0)
* Пример отправки и получения [**тут**](https://mpitutorial.com/tutorials/mpi-send-and-receive/)

## Команды vim

Самый простой способ редактировать файлы на сервере - использовать команду vim.

* Выйти из любого режима - **ESC**
* Войти в режим редактирования - **i**
* Войти в режим визуальный (там можно выделять и копировать) - **V**
* Сохранить и выйти - **ZZ**
* Копировать строку в нормальном режиме - **yy**
* Вставить в нормальном режиме - **p**

Важно, что когда вводите горячие клавиши - регистр тоже имеет значение.

## Как копировать файлы на сервер

1. Скачиваем pscp [отсюда](https://putty.org.ru/download.html)
2. Переходим в директорию с файлом, который хотим перекинуть
3. Используем команду
```
pscp -P 52960 ИМЯ_ВАШЕГО_ФАЙЛА b0190403@remote.vdi.mipt.ru:НАЗВАНИЕ_ВАШЕГО_ФАЙЛА_НА_СЕРВЕРЕ
```

## Как запускать что-нибудь

1. Открываем консоль

2. Вводим команду:

```
ssh -p 52960 LOGIN@remote.vdi.mipt.ru
```

LOGIN выдают на парах.   

3. Нас спрашивают пароль - вводим то, что выдали на паре   

4. Теперь мы находимся в своей персональной папке   
(Если подняться на уровень выше, увидим всех студентов-пользователей этого сервера)   

5. Склонируем этот репозиторий (**Это сделать не получилось**)

6. Переходим в папку с исходником (Если склонировать не получилось, то создаем файл сами (команда **touch**) и просто через **vim** пишем код) и скриптом для запуска.

7. Компилируем:

```
mpicc HelloWorld.c -o hello
```

8. Вставляем в очередь
```
qsub Run.sh
```
9. Используя команду **qstat** можно посмотреть статус выполнения задания.
10. Теперь в этой директории появятся файлы с результатом работы.
